<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
  <title>Ahora Caigo</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#ffdde1;
      --bg2:#ee9ca7;
      --panel:#fff5f7;
      --accent:#ff5e7e;
      --muted:#8e7d82;
    }

    html,body{
      height:100%;
      margin:0;
      background:linear-gradient(180deg,var(--bg1),var(--bg2));
      font-family:'Poppins',sans-serif;
      color:#2d1a22;
    }

    .wrap{max-width:900px;margin:0 auto;padding:20px}

    header{text-align:center;margin-bottom:20px}
    header h1{
      font-size:22px;
      font-weight:700;
      color:var(--accent);
      background:rgba(255,255,255,0.7);
      display:inline-block;
      padding:10px 20px;
      border-radius:20px;
      box-shadow:0 4px 12px rgba(255,94,126,0.4);
    }

    .panel{
      background:var(--panel);
      border-radius:16px;
      padding:18px;
      box-shadow:0 8px 20px rgba(0,0,0,0.1);
    }

    .stage{
      display:grid;
      grid-template-columns:280px 1fr;
      gap:18px;
    }

    /* Tablero */
    .board{
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      min-height:300px;
    }
    .question{
      font-size:18px;
      margin-bottom:14px;
      font-weight:600;
      color:#5b2b36;
    }
    .choices{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
    }
    .choice{
      background:linear-gradient(135deg,#ffd6e0,#ffeef2);
      padding:14px;
      font-size:15px;
      border-radius:10px;
      border:2px solid transparent;
      cursor:pointer;
      transition:all .25s;
      font-weight:600;
      text-align:center;
    }
    .choice:hover{transform:translateY(-4px);box-shadow:0 4px 12px rgba(255,94,126,0.3)}
    .choice.correct{border-color:#7ed957;background:linear-gradient(135deg,#d6ffd6,#f0fff0)}
    .choice.wrong{border-color:#ff5e7e;background:linear-gradient(135deg,#ffd6d6,#fff0f0)}

    /* Lateral */
    .well{
      position:relative;
      background:linear-gradient(180deg,#fff0f5,#ffe5ec);
      height:300px;
      border-radius:12px;
      padding:12px;
      overflow:hidden;
      border:2px dashed rgba(255,94,126,0.4);
    }
    .column{
        position:absolute;
        left:50%;
        top:12px;
        transform:translateX(-50%);
        width:220px;
        height:260px
    }
    .panel-tiles{
        display:grid;
        grid-template-columns:repeat(5,1fr);
        gap:6px;
    }
    .tile{
        height:36px;
        background:rgba(255,255,255,0.03);
        border-radius:6px;
        display:flex;
        align-items:center;
        justify-content:center;
        font-weight:700;
        color:#5b2b36;
        background-color:#ff7792;

    }

    .trapdoor{
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      bottom:8px;
      width:80%;
      height:22px;
      background:rgba(255,94,126,0.2);
      border-radius:10px;
      border:1px solid rgba(255,94,126,0.4);
      text-align:center;
      font-size:12px;
      color:var(--muted);
    }
    .trapdoor.open{
        transform:translateX(-50%) translateY(8px) rotateX(65deg);
        opacity:0
    }

    .player{
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      bottom:30px;
      width:100px;
      display:flex;
      justify-content:center;
    }
    .player img{
      max-width:80%;
    }
    .player.fall{
      animation:fall 1.2s ease-in forwards;
    }
    @keyframes fall{
      to{transform:translateX(-50%) translateY(420px) rotate(20deg);opacity:0}
    }

    /* Botones */
    .controls{display:flex;gap:12px;flex-wrap:wrap;margin-top:14px}
    button{
      background:var(--accent);
      border:none;
      color:#fff;
      padding:12px 16px;
      font-size:16px;
      border-radius:30px;
      cursor:pointer;
      font-weight:600;
      box-shadow:0 4px 12px rgba(255,94,126,0.4);
      transition:all .25s;
    }
    button:hover{transform:scale(1.05);background:#ff7792}
    button.secondary{background:transparent;color:var(--muted);border:1px solid var(--muted)}

    .info{
      display:flex;
      flex-wrap:wrap;
      gap:14px;
      font-size:14px;
      margin-top:10px;
    }

    footer{margin-top:20px;color:var(--muted);font-size:13px;text-align:center}

    /* Responsivo */
    @media(max-width:780px){
      .stage{grid-template-columns:1fr}
      .player{width:80px}
      .choices{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
<div class="wrap">
    <header>
        <h1>Ahora Caigo  - Edici√≥n Pela</h1>
    </header>

    <div class="stage">
        <div class="panel well" id="well">
            <div class="column" id="column">
                <div class="panel-tiles" id="tiles"></div>
            </div>
            <div class="player" id="player">
                <img src="AVATAR.png" alt="Jugador" />
            </div>
            <div class="trapdoor" id="trapdoor">‚ú® Trampilla ‚ú®</div>
        </div>

        <div class="board panel">
            <div class="question" id="question">Cargando preguntas...</div>
            <div class="choices" id="choices"></div>

            <div class="info">
                <div>‚ù§Ô∏è Vidas: <span id="lives">3</span></div>
                <div>‚≠ê Puntos: <span id="score">0</span></div>
                <div>üéØ Ronda: <span id="round">1</span></div>
                <div>‚ùì Pregunta: <span id="qnum">0</span>/<span id="qtotal">0</span></div>
            </div>

            <div class="controls">
                <button id="nextBtn" class="secondary">‚û°Ô∏è Siguiente</button>
                <button id="restart">üîÑ Reiniciar</button>
            </div>
        </div>
    </div>

    <footer>
        Hecho con üíï para ti
    </footer>
</div>
</body>
</html>


  <script>
    const QUESTIONS = [
        { q: '¬øCu√°l es su comida favorita?', choices: ['Pizza', 'Espinacas', 'Jud√≠as', 'Ensalada'], answer: 0 },
        { q: '¬øCu√°l es su color favorito?', choices: ['Amarillo', 'Rojo', 'Verde', 'Azul'], answer: 3 },
        { q: '¬øCu√°l es su serie favorita?', choices: ['Breaking Bad', 'Ataque a los Titanes', 'La Casa de Papel', 'Stranger Things'], answer: 1 },
        { q: '¬øCu√°l es su animal favorito?', choices: ['Perro', 'Gato', 'Beluga', 'Paloma'], answer: 2 },
        { q: '¬øEn qu√© ciudad naci√≥ Pela?', choices: ['Sada', 'A Coru√±a', 'Santiago', 'Pontevedra'], answer: 1 },
        { q: '¬øCu√°l es su pel√≠cula favorita?', choices: ['Infinity War', 'Titanic', 'Avatar', 'El Padrino'], answer: 0 },
        { q: '¬øQu√© le gusta hacer en su tiempo libre?', choices: ['Videojuegos', 'Cocinar', 'Leer', 'Dibujar'], answer: 0 },
        { q: '¬øCu√°l es su videojuego favorito?', choices: ['The Legend of Zelda', 'Super Mario Bros.', 'Minecraft', 'Fortnite'], answer: 2 },
        { q: '¬øCu√°l es su g√©nero musical favorito?', choices: ['Pop-Rock', 'Reggeton', 'Jazz', 'Cl√°sica'], answer: 0 },
        { q: '¬øCu√°l es su lugar de vacaciones ideal?', choices: ['Playa', 'Monta√±a', 'Ciudad', 'Campo'], answer: 2 },
        { q: '¬øQu√© le gusta m√°s hacer los fines de semana?', choices: ['Salir con amigos', 'Quedar con Car', 'Ir al cine', 'Hacer deporte'], answer: 1 },
        { q: '¬øCu√°l es su estaci√≥n del a√±o favorita?', choices: ['Primavera', 'Verano', 'Oto√±o', 'Invierno'], answer: 3 },
        { q: '¬øQu√© instrumento musical le gustar√≠a tocar?', choices: ['Flauta', 'Piano', 'Bater√≠a', 'Viol√≠n'], answer: 2 },
        { q: '¬øCu√°l es su deporte favorito para ver?', choices: ['F√∫tbol', 'Baloncesto', 'Tenis', 'Ninguno'], answer: 3 },
        { q: '¬øCu√°l es su postre favorito?', choices: ['Yogur', 'Tarta de queso', 'Brownie', 'Fruta'], answer: 1 },
    ];

    const QUESTIONS_PER_ROUND = 5;

    // Estado del juego
    let round = 1;
    let idx = 0;
    let score = 0;
    let lives = 3;
    let locked = false;

    // Elementos del DOM
    const elQuestion = document.getElementById('question');
    const elChoices = document.getElementById('choices');
    const elQnum = document.getElementById('qnum');
    const elQtotal = document.getElementById('qtotal');
    const elLives = document.getElementById('lives');
    const elScore = document.getElementById('score');
    const elRound = document.getElementById('round');
    const elNext = document.getElementById('nextBtn');
    const elRestart = document.getElementById('restart');
    const elTiles = document.getElementById('tiles');
    const elPlayer = document.getElementById('player');
    const elTrapdoor = document.getElementById('trapdoor');

    // Inicializar juego
    function init() {
        idx = 0;
        score = 0;
        lives = 3;
        round = 1;
        locked = false;
        elQtotal.textContent = QUESTIONS_PER_ROUND;
        renderTiles();
        render();
    }

    // Obtener preguntas de la ronda actual (en orden)
    function getRoundQuestions() {
        const start = (round - 1) * QUESTIONS_PER_ROUND;
        return QUESTIONS.slice(start, start + QUESTIONS_PER_ROUND);
    }

    // Renderizar tiles
    function renderTiles() {
        elTiles.innerHTML = '';
        const roundQs = getRoundQuestions();
        for(let i = 0; i < roundQs.length; i++) {
            const d = document.createElement('div'); 
            d.className = 'tile'; 
            d.textContent = i+1; 
            elTiles.appendChild(d);
        }
        highlightTiles();
    }

    // Resaltar tiles ya contestadas
    function highlightTiles() {
        const children = elTiles.children;
        for(let i = 0; i < children.length; i++) {
            children[i].style.opacity = i < idx ? '0.35' : '1';
        }
    }

    // Renderizar pregunta actual
    function render() {
        const current = getRoundQuestions()[idx];
        elQuestion.textContent = current.q;
        elChoices.innerHTML = '';
        current.choices.forEach((c, i) => {
            const btn = document.createElement('div');
            btn.className = 'choice';
            btn.tabIndex = 0;
            btn.dataset.index = i;
            btn.textContent = `${i+1}. ${c}`;
            btn.addEventListener('click', ()=> select(i, btn));
            elChoices.appendChild(btn);
        });
        elQnum.textContent = idx+1;
        elLives.textContent = lives;
        elScore.textContent = score;
        elRound.textContent = round;
        highlightTiles();
        locked = false;
        elNext.disabled = false;
    }

    function select(selectedIndex, btnEl) {
        if (locked) return;
        locked = true;

        const current = getRoundQuestions()[idx];
        const correct = current.answer;

        // Limpiar estilos
        [...elChoices.children].forEach(ch => ch.classList.remove('correct', 'wrong'));

        if (selectedIndex === correct) {
            btnEl.classList.add('correct');
            score += 10;
            elScore.textContent = score;
            setTimeout(nextQuestion, 700);
        } else {
            btnEl.classList.add('wrong');
            elChoices.children[correct].classList.add('correct');

            lives--;
            elLives.textContent = lives;

            if (lives <= 0) {
                elTrapdoor.classList.add('open');
                triggerFall();
            } else {
                setTimeout(() => locked = false, 800);
            }
        }

        highlightTiles();
    }


    // Pasar a la siguiente pregunta
    function nextQuestion() {
        const children = elTiles.children;
        if(children[idx]) children[idx].style.background = 'linear-gradient(90deg, rgba(255,204,0,0.15), rgba(255,255,255,0.02))';
        idx++;
        const roundQs = getRoundQuestions();
        if(idx >= roundQs.length) {
            round++;
            idx = 0;
            if((round-1) * QUESTIONS_PER_ROUND >= QUESTIONS.length) {
                showMessage(`¬°Has terminado todas las preguntas! Puntuaci√≥n final: ${score}`);
                return;
            }
            renderTiles();
            showMessage(`¬°Has completado la ronda ${round-1}! Comienza la ronda ${round}.`);
        }
        render();
    }

    // Animaci√≥n ca√≠da
    function triggerFall() {
        elTrapdoor.classList.add('open');
        elPlayer.classList.add('fall');
        showMessage('¬°Has caido! Juego terminado.');
        locked = true;
        setTimeout(()=> elPlayer.style.display='none', 1200);
    }

    function showMessage(msg) {
        const message = document.createElement('div');
        message.textContent = msg;

        // Estilos
        message.style.position = 'fixed';
        message.style.bottom = '20px';
        message.style.left = '50%';
        message.style.transform = 'translateX(-50%)';
        message.style.background = '#ff7792';
        message.style.color = '#fff';
        message.style.padding = '10px 20px';
        message.style.borderRadius = '8px';
        message.style.boxShadow = '0 4px 15px rgba(0,0,0,0.4)';
        message.style.fontFamily = 'Poppins, sans-serif';
        message.style.fontWeight = '600';
        message.style.opacity = '0';
        message.style.transition = 'opacity 0.3s';

        // Ancho m√°ximo y ancho relativo para m√≥viles
        message.style.width = '90%';       // ocupa casi todo el ancho en m√≥vil
        message.style.maxWidth = '600px';  // no demasiado ancho en pantallas grandes
        message.style.textAlign = 'center'; // centra el texto

        document.body.appendChild(message);

        // Mostrar con animaci√≥n
        requestAnimationFrame(() => {
            message.style.opacity = '1';
        });

        // Desaparecer despu√©s de 3 segundos
        setTimeout(() => {
            message.style.opacity = '0';
            message.addEventListener('transitionend', () => message.remove());
        }, 3000);
    }


    // Controles
    elNext.addEventListener('click', ()=>{ if(!locked) nextQuestion(); });
    elRestart.addEventListener('click', ()=>{
        elPlayer.style.display=''; 
        elPlayer.classList.remove('fall'); 
        elTrapdoor.classList.remove('open');
        init();
    });

    // Teclado 1-4
    window.addEventListener('keydown', (e)=>{
        if(e.key >= '1' && e.key <= '4'){
            const n = parseInt(e.key)-1;
            const current = getRoundQuestions()[idx];
            if(current && current.choices[n] !== undefined){
                select(n, elChoices.children[n]);
            }
        }
        if(e.key==='Enter') nextQuestion();
        if(e.key==='r' || e.key==='R') elRestart.click();
    });

    // Inicializar
    init();
</script>
</body>
</html>
